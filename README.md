# Ozon Parser Microservice –¥–ª—è Amvera Cloud

–ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å –¥–ª—è –ø–∞—Ä—Å–∏–Ω–≥–∞ —Ç–æ–≤–∞—Ä–æ–≤ Ozon —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π —Ä–æ—Ç–∞—Ü–∏–µ–π IP —á–µ—Ä–µ–∑ Amvera Cloud.

## ‚ö†Ô∏è –í–∞–∂–Ω–æ: –¢—Ä–µ–±—É—é—Ç—Å—è –ø—Ä–æ–∫—Å–∏!

**Ozon –±–ª–æ–∫–∏—Ä—É–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—é** —á–µ—Ä–µ–∑ anti-bot —Å–∏—Å—Ç–µ–º—É (abt-challenge). –î–ª—è —Ä–∞–±–æ—Ç—ã –ø–∞—Ä—Å–µ—Ä–∞ **–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û** –Ω—É–∂–Ω—ã –ø—Ä–æ–∫—Å–∏!

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–æ–∫—Å–∏ –≤ Amvera:

1. –í Amvera Dashboard ‚Üí –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è ‚Üí –¥–æ–±–∞–≤–∏—Ç—å:
   ```
   OZON_PROXY_URL=mobpool.proxy.market:10000@username:password
   ```

2. –§–æ—Ä–º–∞—Ç: `server:port@username:password`

3. –ü—Ä–∏–º–µ—Ä (mobpool):
   ```
   OZON_PROXY_URL=mobpool.proxy.market:10000@cyqNcQLcZYMt:d4DS2q5j
   ```

## üéØ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ Amvera

- ‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Ä–æ—Ç–∞—Ü–∏—è IP** - –ø—Ä–∏ –∫–∞–∂–¥–æ–º –¥–µ–ø–ª–æ–µ –Ω–æ–≤—ã–π IP
- ‚úÖ **–ë–µ—Å–ø–ª–∞—Ç–Ω—ã–π tier** - –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- ‚úÖ **–ü—Ä–æ—Å—Ç–æ–π –¥–µ–ø–ª–æ–π** - —á–µ—Ä–µ–∑ GitHub
- ‚úÖ **–û–±—Ö–æ–¥ –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫ Ozon** - —Ä–∞–∑–Ω—ã–µ IP –ø—Ä–∏ –∫–∞–∂–¥–æ–º –∑–∞–ø—É—Å–∫–µ

## üöÄ –î–µ–ø–ª–æ–π –Ω–∞ Amvera

### –®–∞–≥ 1: –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è

1. –ó–∞–π—Ç–∏ –Ω–∞ https://amvera.io
2. –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è (–º–æ–∂–Ω–æ —á–µ—Ä–µ–∑ GitHub)
3. –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π –ø—Ä–æ–µ–∫—Ç

### –®–∞–≥ 2: –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è

1. –í Amvera: "–°–æ–∑–¥–∞—Ç—å –ø—Ä–æ–µ–∫—Ç" ‚Üí "–ò–∑ GitHub"
2. –í—ã–±—Ä–∞—Ç—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π `treesum`
3. –£–∫–∞–∑–∞—Ç—å –ø—É—Ç—å –∫ —Å–µ—Ä–≤–∏—Å—É: `ozon_parser_service`
4. –í—ã–±—Ä–∞—Ç—å Dockerfile

### –®–∞–≥ 3: –ù–∞—Å—Ç—Ä–æ–π–∫–∞

**Build settings:**
- Build context: `ozon_parser_service`
- Dockerfile path: `Dockerfile`

**Environment variables:**
- –ù–µ —Ç—Ä–µ–±—É—é—Ç—Å—è (–ø—Ä–æ–∫—Å–∏ –Ω–µ –Ω—É–∂–Ω—ã!)

### –®–∞–≥ 4: –î–µ–ø–ª–æ–π

1. –ù–∞–∂–∞—Ç—å "Deploy"
2. –ü–æ–¥–æ–∂–¥–∞—Ç—å 3-5 –º–∏–Ω—É—Ç
3. –ü–æ–ª—É—á–∏—Ç—å URL: `https://your-project.amvera.io`

## üì° API

### Health Check
```bash
GET https://your-project.amvera.io/
```

### –ü–∞—Ä—Å–∏–Ω–≥ —Ç–æ–≤–∞—Ä–∞
```bash
POST https://your-project.amvera.io/parse
Content-Type: application/json

{
  "url": "https://www.ozon.ru/product/smartfon-apple-iphone-15-128-gb-rozovyy-1475305782/"
}
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "title": "–°–º–∞—Ä—Ç—Ñ–æ–Ω Apple iPhone 15 128 –ì–ë, —Ä–æ–∑–æ–≤—ã–π",
  "sku": "1475305782",
  "marketplace": "ozon",
  "image_url": "https://cdn1.ozone.ru/s3/multimedia-1/...",
  "price": 79990.0,
  "old_price": 89990.0,
  "rating": 4.8,
  "reviews_count": 1234
}
```

## üîó –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –æ—Å–Ω–æ–≤–Ω—ã–º backend

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ü—Ä—è–º–æ–π –≤—ã–∑–æ–≤

```python
# backend/app/parsers/ozon.py
import httpx

AMVERA_PARSER_URL = "https://your-project.amvera.io"

async def parse_via_amvera(url: str):
    async with httpx.AsyncClient() as client:
        response = await client.post(
            f"{AMVERA_PARSER_URL}/parse",
            json={"url": url},
            timeout=60.0
        )
        return response.json()
```

### –í–∞—Ä–∏–∞–Ω—Ç 2: –ß–µ—Ä–µ–∑ environment variable

```bash
# backend/.env
OZON_PARSER_SERVICE_URL=https://your-project.amvera.io
```

```python
# backend/app/config.py
class Settings(BaseSettings):
    OZON_PARSER_SERVICE_URL: str = None
```

## üß™ –õ–æ–∫–∞–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

```bash
# –ó–∞–ø—É—Å–∫ –ª–æ–∫–∞–ª—å–Ω–æ
cd ozon_parser_service
pip install -r requirements.txt
playwright install chromium
python main.py

# –¢–µ—Å—Ç
curl -X POST http://localhost:8000/parse \
  -H "Content-Type: application/json" \
  -d '{"url": "https://www.ozon.ru/product/smartfon-apple-iphone-15-128-gb-rozovyy-1475305782/"}'
```

## üí∞ –°—Ç–æ–∏–º–æ—Å—Ç—å

**Amvera Free Tier:**
- 512 MB RAM
- 0.5 CPU
- –î–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–ª—è –ø–∞—Ä—Å–∏–Ω–≥–∞!

**–ü–ª–∞—Ç–Ω—ã–π –ø–ª–∞–Ω (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ –±–æ–ª—å—à–µ):**
- –û—Ç 200‚ÇΩ/–º–µ—Å—è—Ü
- 1 GB RAM
- 1 CPU

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

–í Amvera dashboard –º–æ–∂–Ω–æ —Å–º–æ—Ç—Ä–µ—Ç—å:
- –õ–æ–≥–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –∑–∞–ø—Ä–æ—Å–æ–≤
- –û—à–∏–±–∫–∏

## üîÑ –ê–≤—Ç–æ–¥–µ–ø–ª–æ–π

–ü—Ä–∏ –ø—É—à–µ –≤ `main` –≤–µ—Ç–∫—É - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –¥–µ–ø–ª–æ–π!

```bash
git add ozon_parser_service/
git commit -m "feat: add Ozon parser microservice for Amvera"
git push origin main
```

## üêõ Troubleshooting

### –û—à–∏–±–∫–∞ "Timeout"
- –£–≤–µ–ª–∏—á–∏—Ç—å timeout –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö Amvera
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏

### –û—à–∏–±–∫–∞ "Out of memory"
- –ü–µ—Ä–µ–π—Ç–∏ –Ω–∞ –ø–ª–∞—Ç–Ω—ã–π –ø–ª–∞–Ω
- –ò–ª–∏ —É–º–µ–Ω—å—à–∏—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤

### Ozon –≤—Å—ë —Ä–∞–≤–Ω–æ –±–ª–æ–∫–∏—Ä—É–µ—Ç
- –ü–æ–¥–æ–∂–¥–∞—Ç—å –∏ –ø–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å —Å–Ω–æ–≤–∞ (–Ω–æ–≤—ã–π IP –ø—Ä–∏ —Å–ª–µ–¥—É—é—â–µ–º –¥–µ–ø–ª–æ–µ)
- –î–æ–±–∞–≤–∏—Ç—å –±–æ–ª—å—à–µ –∑–∞–¥–µ—Ä–∂–µ–∫ –≤ –∫–æ–¥
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–æ–º–±–æ: Amvera + –ø—Ä–æ–∫—Å–∏
